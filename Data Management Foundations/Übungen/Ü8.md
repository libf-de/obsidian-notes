## 1a) Kanonische Überdeckung
![[Ü8_1a.svg]]

### Linksreduktion
*= "Update" + Ersetzen der Kanten*
$A \rightarrow BC$
$B \rightarrow CD$
$CD \rightarrow CE$
$B \rightarrow EF$

### Rechtsreduktion
*= Löschen der Kanten*
$A \rightarrow B\not\not C$
$B \rightarrow CD$
$CD \rightarrow \not\not C E$   (wenn links mehrere stehen und eins davon rechts -> kann rechts immer weg)
$B \rightarrow \not\not E F$

### Entfernen von FDs
($X \rightarrow \not O$)
-keine-

### Zusammenfassen
$A \rightarrow B$
$B \rightarrow CDF$
$CD \rightarrow E$

## 1b)
e

### Linksreduktion
$$\begin{align*}
&A \rightarrow BC\\
&B\not\not C \rightarrow BDE\\
&D \rightarrow F\\
&E \rightarrow EG\\
&B \rightarrow C\\
&C \rightarrow DE
\end{align*}$$

### Rechtsreduktion
$$\begin{align*}
&A \rightarrow B \not\not C\\
&B \rightarrow \not\not B\not\not D\not\not E\\
&D \rightarrow F\\
&E \rightarrow \not\not E G\\
&B \rightarrow C\\
&C \rightarrow DE
\end{align*}$$

### Entfernen von FDs
$$\begin{align*}
A \rightarrow B\\
D \rightarrow F\\
E \rightarrow G\\
B \rightarrow C\\
C \rightarrow DE
\end{align*}$$
### Zusammenfassen
$$\begin{align*}
A \rightarrow B\\
D \rightarrow F\\
E \rightarrow G\\
B \rightarrow C\\
C \rightarrow DE
\end{align*}$$


```sql

-- create
CREATE TABLE flights (
 departure	char(20) NOT NULL,
 arrival        char(20) NOT NULL,
 carrier        char(30) NOT NULL,
 flightnum      char(6)  NOT NULL CONSTRAINT flnum_check CHECK(flightnum ~ '([A-Z]){2}([0-9]){4}') PRIMARY KEY,
 prize		      money NOT NULL
);
-- insert
INSERT INTO flights VALUES
    ('Dresden', 'Frankfurt', 'Lufthansa', 'LH2711', 119.99),
    ('Frankfurt', 'Sevilla', 'Lufthansa', 'LH3033', 209.98),
    ('Dresden', 'Berlin', 'Lufthansa', 'LH2712', 99.99),
    ('Berlin', 'Zürich', 'Swiss', 'LX4325', 129.99),
    ('Zürich', 'Lugano', 'Swiss', 'LX7499', 179.99),
    ('Berlin', 'München', 'Lufthansa', 'LH3088', 109.99),
    ('München', 'New York', 'Lufthansa', 'LH6123', 389.99),
    ('Leipzig', 'Mallorca', 'Lufthansa', 'LH2312', 159.99)
    ;

-- fetch 
--SELECT * FROM flights;
WITH RECURSIVE alldestinations(departure, arrival, connects, cost) AS ( 
 SELECT f.departure, f.arrival, 0, prize from flights f WHERE f.departure = 'Dresden' OR f.arrival = 'Dresden'
UNION ALL
 SELECT r.departure, b.arrival, r.connects+1, r.cost+b.prize 
 FROM alldestinations r, flights b
 WHERE r.arrival = b.departure OR r.departure = b.arrival
)
SELECT DISTINCT departure, arrival, connects, cost FROM alldestinations

-- Nur Abflüge
WITH RECURSIVE destinations(departure, arrival, connects, cost) AS ( 
 SELECT f.departure, f.arrival, 0, prize from flights f WHERE f.departure = 'Dresden'
UNION ALL
 SELECT r.departure, b.arrival, r.connects+1, r.cost+b.prize 
 FROM destinations r, flights b
 WHERE r.arrival = b.departure
)
SELECT DISTINCT departure, arrival, connects, cost FROM destinations
-- recursion
```

-> UNION eliminiert Duplikate, UNION ALL nicht.